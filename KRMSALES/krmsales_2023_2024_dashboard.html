<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KUROMATSU ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ 2023-2024</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&family=Noto+Sans+JP:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-dark: #0a1628;
            --primary-navy: #1a2744;
            --accent-gold: #c9a962;
            --accent-gold-light: #e8d5a3;
            --text-light: #ffffff;
            --text-muted: #8b9cb5;
            --glass-bg: rgba(26, 39, 68, 0.85);
            --border-subtle: rgba(201, 169, 98, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary-navy) 50%, #0d1f3c 100%);
            color: var(--text-light);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 30px 20px;
            border-bottom: 1px solid var(--border-subtle);
            margin-bottom: 25px;
        }

        .header h1 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 300;
            font-size: clamp(1.4rem, 4vw, 2.2rem);
            letter-spacing: 0.3em;
            color: var(--accent-gold);
            margin-bottom: 8px;
        }

        .header .subtitle {
            font-size: 0.85rem;
            color: var(--text-muted);
            letter-spacing: 0.1em;
        }

        /* Year Tabs */
        .year-tabs {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .year-tab {
            padding: 10px 24px;
            background: var(--glass-bg);
            border: 1px solid var(--border-subtle);
            border-radius: 25px;
            color: var(--text-muted);
            font-family: 'Montserrat', sans-serif;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85rem;
        }

        .year-tab:hover {
            border-color: var(--accent-gold);
            color: var(--accent-gold);
        }

        .year-tab.active {
            background: linear-gradient(135deg, var(--accent-gold), #a08050);
            color: var(--primary-dark);
            border-color: var(--accent-gold);
        }

        /* Chart Section */
        .chart-section {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .chart-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            color: var(--accent-gold);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }

        @media (max-width: 600px) {
            .chart-container {
                height: 250px;
            }
        }

        /* Month Selector for Chart */
        .month-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-bottom: 15px;
            justify-content: center;
        }

        .month-btn {
            padding: 6px 12px;
            background: transparent;
            border: 1px solid var(--border-subtle);
            border-radius: 15px;
            color: var(--text-muted);
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .month-btn:hover,
        .month-btn.active {
            background: var(--accent-gold);
            color: var(--primary-dark);
            border-color: var(--accent-gold);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 18px 15px;
            text-align: center;
        }

        .stat-card .label {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 6px;
        }

        .stat-card .value {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--accent-gold);
        }

        .stat-card .sub {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-top: 4px;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 30px 20px;
            color: var(--text-muted);
            font-size: 0.75rem;
            letter-spacing: 0.1em;
            border-top: 1px solid var(--border-subtle);
            margin-top: 30px;
        }

        /* Legend Custom */
        .chart-legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>KUROMATSU</h1>
            <p class="subtitle">DASHBOARD 2023-2024</p>
        </header>

        <!-- Year Tabs -->
        <div class="year-tabs">
            <button class="year-tab active" data-tab="2024">2024å¹´åº¦</button>
            <button class="year-tab" data-tab="2023">2023å¹´åº¦</button>
            <button class="year-tab" data-tab="compare">å¹´åº¦æ¯”è¼ƒ</button>
        </div>

        <!-- 2024 Content -->
        <div class="tab-content active" id="tab-2024">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="label">å¹´é–“ç·å£²ä¸Š</div>
                    <div class="value">Â¥46.2M</div>
                    <div class="sub">ç¨æŠœ Â¥42.0M</div>
                </div>
                <div class="stat-card">
                    <div class="label">æœˆå¹³å‡</div>
                    <div class="value">Â¥3.85M</div>
                    <div class="sub">ç¨æŠœ Â¥3.50M</div>
                </div>
                <div class="stat-card">
                    <div class="label">æœ€é«˜æœˆ</div>
                    <div class="value">12æœˆ</div>
                    <div class="sub">Â¥4.60M</div>
                </div>
            </div>

            <div class="chart-section">
                <h2 class="chart-title">ğŸ“ˆ å¹´é–“å£²ä¸Šæ¨ç§»</h2>
                <div class="chart-container">
                    <canvas id="annualChart2024"></canvas>
                </div>
            </div>

            <div class="chart-section">
                <h2 class="chart-title">ğŸ“Š æ›œæ—¥åˆ¥å¹³å‡å£²ä¸Š</h2>
                <div class="chart-container">
                    <canvas id="weekdayChart2024"></canvas>
                </div>
            </div>
        </div>

        <!-- 2023 Content -->
        <div class="tab-content" id="tab-2023">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="label">å¹´é–“ç·å£²ä¸Š</div>
                    <div class="value">Â¥47.7M</div>
                    <div class="sub">ç¨æŠœ Â¥43.4M</div>
                </div>
                <div class="stat-card">
                    <div class="label">æœˆå¹³å‡</div>
                    <div class="value">Â¥3.98M</div>
                    <div class="sub">ç¨æŠœ Â¥3.62M</div>
                </div>
                <div class="stat-card">
                    <div class="label">æœ€é«˜æœˆ</div>
                    <div class="value">12æœˆ</div>
                    <div class="sub">Â¥4.82M</div>
                </div>
            </div>

            <div class="chart-section">
                <h2 class="chart-title">ğŸ“ˆ å¹´é–“å£²ä¸Šæ¨ç§»</h2>
                <div class="chart-container">
                    <canvas id="annualChart2023"></canvas>
                </div>
            </div>

            <div class="chart-section">
                <h2 class="chart-title">ğŸ“Š æ›œæ—¥åˆ¥å¹³å‡å£²ä¸Š</h2>
                <div class="chart-container">
                    <canvas id="weekdayChart2023"></canvas>
                </div>
            </div>
        </div>

        <!-- Comparison Content -->
        <div class="tab-content" id="tab-compare">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="label">2024å¹´åº¦</div>
                    <div class="value">Â¥46.2M</div>
                    <div class="sub">å‰å¹´æ¯” -3.3%</div>
                </div>
                <div class="stat-card">
                    <div class="label">2023å¹´åº¦</div>
                    <div class="value">Â¥47.7M</div>
                    <div class="sub">â€”</div>
                </div>
                <div class="stat-card">
                    <div class="label">2å¹´é–“åˆè¨ˆ</div>
                    <div class="value">Â¥93.9M</div>
                    <div class="sub">ç¨æŠœ Â¥85.4M</div>
                </div>
            </div>

            <div class="chart-section">
                <h2 class="chart-title">ğŸ“ˆ å¹´é–“å£²ä¸Šæ¨ç§» æ¯”è¼ƒ</h2>
                <div class="chart-container">
                    <canvas id="compareAnnualChart"></canvas>
                </div>
                <div class="chart-legend">
                    <div class="legend-item">
                        <div class="legend-dot" style="background: #c9a962;"></div>2024å¹´åº¦
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot" style="background: #6ea8fe;"></div>2023å¹´åº¦
                    </div>
                </div>
            </div>

            <div class="chart-section">
                <h2 class="chart-title">ğŸ“Š æ›œæ—¥åˆ¥å¹³å‡å£²ä¸Š æ¯”è¼ƒ</h2>
                <div class="chart-container">
                    <canvas id="compareWeekdayChart"></canvas>
                </div>
                <div class="chart-legend">
                    <div class="legend-item">
                        <div class="legend-dot" style="background: #c9a962;"></div>2024å¹´åº¦
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot" style="background: #6ea8fe;"></div>2023å¹´åº¦
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            SAPPORO VIEWTIFUL DINING â€” KUROMATSU
        </footer>
    </div>

    <script>
        // Tax helpers
        const TAX_RATE = 0.10;
        const calcExTax = (v) => Math.floor(v / (1 + TAX_RATE));
        const formatWithTax = (label, value) => [
            `${label}(ç¨è¾¼): Â¥${value.toLocaleString()}`,
            `${label}(ç¨æŠœ): Â¥${calcExTax(value).toLocaleString()}`
        ];

        // Data
        const months = ['4æœˆ', '5æœˆ', '6æœˆ', '7æœˆ', '8æœˆ', '9æœˆ', '10æœˆ', '11æœˆ', '12æœˆ', '1æœˆ', '2æœˆ', '3æœˆ'];
        const weekdays = ['æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ', 'æ—¥'];

        const data2024 = {
            monthly: [2539180, 3356720, 3950740, 4399530, 4255520, 3424650, 3664130, 3874580, 4602110, 4427840, 4015900, 3657050],
            weekday: [108419, 105741, 121192, 121679, 139373, 151373, 146269]
        };

        const data2023 = {
            monthly: [3801370, 3824270, 3674360, 3998360, 3823150, 3479640, 4215970, 4067284, 4815354, 3929730, 4894110, 3213480],
            weekday: [112353, 107812, 119335, 128680, 144991, 154682, 157828]
        };

        // Chart.js defaults
        Chart.defaults.color = '#8b9cb5';
        Chart.defaults.borderColor = 'rgba(201, 169, 98, 0.2)';
        Chart.defaults.font.family = "'Noto Sans JP', sans-serif";

        const chartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: false },
                tooltip: {
                    backgroundColor: 'rgba(10, 22, 40, 0.95)',
                    titleColor: '#c9a962',
                    bodyColor: '#ffffff',
                    borderColor: '#c9a962',
                    borderWidth: 1,
                    padding: 12,
                    callbacks: {
                        label: (ctx) => formatWithTax('å£²ä¸Š', ctx.raw)
                    }
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    grid: { color: 'rgba(201, 169, 98, 0.1)' },
                    ticks: {
                        callback: (v) => 'Â¥' + (v / 1000000).toFixed(1) + 'M'
                    }
                },
                x: {
                    grid: { display: false }
                }
            }
        };

        // Tab switching
        document.querySelectorAll('.year-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.year-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById('tab-' + tab.dataset.tab).classList.add('active');
            });
        });

        // Create charts
        function createLineChart(canvasId, data, color) {
            return new Chart(document.getElementById(canvasId), {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [{
                        data: data,
                        borderColor: color,
                        backgroundColor: color.replace(')', ', 0.1)').replace('rgb', 'rgba'),
                        borderWidth: 2,
                        tension: 0.3,
                        fill: true,
                        pointRadius: 4,
                        pointBackgroundColor: color
                    }]
                },
                options: chartOptions
            });
        }

        function createBarChart(canvasId, data, color) {
            return new Chart(document.getElementById(canvasId), {
                type: 'bar',
                data: {
                    labels: weekdays,
                    datasets: [{
                        data: data,
                        backgroundColor: color.replace(')', ', 0.7)').replace('rgb', 'rgba'),
                        borderColor: color,
                        borderWidth: 1,
                        borderRadius: 6
                    }]
                },
                options: chartOptions
            });
        }

        function createCompareLineChart(canvasId, data1, data2) {
            return new Chart(document.getElementById(canvasId), {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [
                        {
                            label: '2024å¹´åº¦',
                            data: data1,
                            borderColor: 'rgb(201, 169, 98)',
                            backgroundColor: 'rgba(201, 169, 98, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: false,
                            pointRadius: 4,
                            pointBackgroundColor: 'rgb(201, 169, 98)'
                        },
                        {
                            label: '2023å¹´åº¦',
                            data: data2,
                            borderColor: 'rgb(110, 168, 254)',
                            backgroundColor: 'rgba(110, 168, 254, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: false,
                            pointRadius: 4,
                            pointBackgroundColor: 'rgb(110, 168, 254)'
                        }
                    ]
                },
                options: {
                    ...chartOptions,
                    plugins: {
                        ...chartOptions.plugins,
                        tooltip: {
                            ...chartOptions.plugins.tooltip,
                            callbacks: {
                                label: (ctx) => {
                                    const year = ctx.datasetIndex === 0 ? '2024' : '2023';
                                    return formatWithTax(year + 'å¹´åº¦', ctx.raw);
                                }
                            }
                        }
                    }
                }
            });
        }

        function createCompareBarChart(canvasId, data1, data2) {
            return new Chart(document.getElementById(canvasId), {
                type: 'bar',
                data: {
                    labels: weekdays,
                    datasets: [
                        {
                            label: '2024å¹´åº¦',
                            data: data1,
                            backgroundColor: 'rgba(201, 169, 98, 0.7)',
                            borderColor: 'rgb(201, 169, 98)',
                            borderWidth: 1,
                            borderRadius: 4
                        },
                        {
                            label: '2023å¹´åº¦',
                            data: data2,
                            backgroundColor: 'rgba(110, 168, 254, 0.7)',
                            borderColor: 'rgb(110, 168, 254)',
                            borderWidth: 1,
                            borderRadius: 4
                        }
                    ]
                },
                options: {
                    ...chartOptions,
                    plugins: {
                        ...chartOptions.plugins,
                        tooltip: {
                            ...chartOptions.plugins.tooltip,
                            callbacks: {
                                label: (ctx) => {
                                    const year = ctx.datasetIndex === 0 ? '2024' : '2023';
                                    return formatWithTax(year + 'å¹´åº¦', ctx.raw);
                                }
                            }
                        }
                    }
                }
            });
        }

        // Initialize charts
        createLineChart('annualChart2024', data2024.monthly, 'rgb(201, 169, 98)');
        createBarChart('weekdayChart2024', data2024.weekday, 'rgb(201, 169, 98)');
        createLineChart('annualChart2023', data2023.monthly, 'rgb(110, 168, 254)');
        createBarChart('weekdayChart2023', data2023.weekday, 'rgb(110, 168, 254)');
        createCompareLineChart('compareAnnualChart', data2024.monthly, data2023.monthly);
        createCompareBarChart('compareWeekdayChart', data2024.weekday, data2023.weekday);
    </script>
</body>

</html>